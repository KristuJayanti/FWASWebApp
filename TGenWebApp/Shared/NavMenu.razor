@using TGenWebApp.Services
@using TGenWebApp.Shared.NavMenus
@inject Blazored.LocalStorage.ILocalStorageService LocalStorage
@inject NavigationManager Manager;

@if (_isLoggedIn) {
    @if (_isInstitute) {
        <InstitutionLoginNavMenu Session="@_session"/>
    } else {
        <UserLoginNavMenu Session="@_session"/>
    }
} else {
    <LoggedOutNavMenu OnSessionChanged="@SessionChanged" />
}

@code {

    private Session _session;
    private bool _isLoggedIn, _isInstitute;

    public async void SessionChanged(Session newSession) {
        _session = newSession;
        if (!string.IsNullOrEmpty(_session?.Id)) {
            _isLoggedIn = true;
            _isInstitute = (_session.userType == UserType.institution);
        }
        StateHasChanged();
    }

}