@page "/Manage"
@page "/Manage/{currentPage}"

@using System.Reflection.Metadata
@using TGenWebApp.Services
@inject Blazored.LocalStorage.ILocalStorageService LocalStorage
@inject NavigationManager NavigationManager;

<style>
    .fa-9x {
        width: 100px; 
        height: 100px;
        margin-left: 40px;
        margin-right: 40px;
    }
</style>

<div style="width: 100vw; position: fixed; background: #fffc; backdrop-filter: blur(4px); z-index: 10; margin-top: 1rem;">
    <div style="display: flex; align-items: center; justify-content: center; ">
        <nav>
            <ul>
                <li>
                    <a class='@(currentPage == "Deaneries" ? "active" : "")'
                       @onclick='() => NavigateTo("Deaneries")'>
                        Deaneries
                    </a>
                </li>
                <li>
                    <a class='@(currentPage == "Departments" ? "active" : "")'
                       @onclick='() => NavigateTo("Departments")'>
                        Departments
                    </a>
                </li>
                <li>
                    <a class='@(currentPage == "Faculty" ? "active" : "")'
                       @onclick='() => NavigateTo("Faculty")'>
                        Faculty
                    </a>
                </li>
                <li>
                    <a class='@(currentPage == "Programmes" ? "active" : "")'
                       @onclick='() => NavigateTo("Programmes")'>
                        Programmes
                    </a>
                </li>
                <li>
                    <a class='@(currentPage == "Courses" ? "active" : "")'
                       @onclick='() => NavigateTo("Courses")'>
                        Courses
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>

<div style="margin-top: 4rem;">

    @switch (currentPage) {
        case "Deaneries":
            <Deaneries/>
            break;
        case "Departments":
            <Departments/>
            break;
        case "Faculty":
            <Faculty/>
            break;
        case "Programmes":
            <Programmes/>
            break;
        case "Courses":
            <Courses/>
            break;
        default:
            <div style='padding-top: 5rem; margin-left: 10vw;'>
                <CardLayout ChildrenHeight="10rem"
                            ChildrenWidth="10rem">
                    @* Original in layouts.txt *@
                    <div @onclick='() => NavigateTo("Deaneries")'>
                        <Card>
                            <svg aria-hidden="true"
                                 class="fa-9x fa-university fa-w-16 svg-inline--fa"
                                 data-icon="university"
                                 data-prefix="fad"
                                 focusable="false"
                                 role="img"
                                 viewBox="0 0 512 512"
                                 xmlns="http://www.w3.org/2000/svg">
                                <g class="fa-group">
                                    <path class="fa-secondary"
                                          d="M160,192V384h64V192h64V384h64V192h64V384h36a12,12,0,0,1,12,12v20H48V396a12,12,0,0,1,12-12H96V192Z"
                                          fill="currentColor">
                                    </path>
                                    <path class="fa-primary"
                                          d="M491.06,120.61l-232-88a8,8,0,0,0-6.12,0l-232,88A8,8,0,0,0,16,128v16a8,8,0,0,0,8,8H48v12a12,12,0,0,0,12,12H452a12,12,0,0,0,12-12V152h24a8,8,0,0,0,8-8V128A8,8,0,0,0,491.06,120.61ZM472,432H40a24,24,0,0,0-24,24v16a8,8,0,0,0,8,8H488a8,8,0,0,0,8-8V456A24,24,0,0,0,472,432Z"
                                          fill="currentColor">
                                    </path>
                                </g>
                            </svg>
                            <h3 style='text-align: center'>Deaneries</h3>
                            <p>Manage what courses your college has to offer.</p>
                        </Card>
                    </div>
                    <div @onclick='() => NavigateTo("Departments")'>
                        <Card>
                            <svg aria-hidden="true"
                                 class="fa-9x fa-school fa-w-20 svg-inline--fa"
                                 data-icon="school"
                                 data-prefix="fad"
                                 focusable="false"
                                 role="img"
                                 viewBox="0 0 640 512"
                                 xmlns="http://www.w3.org/2000/svg">
                                <g class="fa-group">
                                    <path class="fa-secondary"
                                          d="M360 176h-24v-40a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v64a8 8 0 0 0 8 8h48a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8zM0 224v272a16 16 0 0 0 16 16h80V192H32a32 32 0 0 0-32 32zm608-32h-64v320h80a16 16 0 0 0 16-16V224a32 32 0 0 0-32-32z"
                                          fill="currentColor">
                                    </path>
                                    <path class="fa-primary"
                                          d="M497.75 112l-160-106.63a32 32 0 0 0-35.5 0L142.25 112A32 32 0 0 0 128 138.66V512h128V368a16 16 0 0 1 16-16h96a16 16 0 0 1 16 16v144h128V138.67A32 32 0 0 0 497.75 112zM320 256a80 80 0 1 1 80-80 80 80 0 0 1-80 80z"
                                          fill="currentColor">
                                    </path>
                                </g>
                            </svg>
                            <h3 style='text-align: center'>Departments</h3>
                            <p>Manage all details about classes, students, and timings.</p>
                        </Card>
                    </div>
                    <div @onclick='() => NavigateTo("Faculties")'>
                        <Card >
                            <svg aria-hidden="true"
                                 class="fa-9x fa-chalkboard-teacher fa-w-20 svg-inline--fa"
                                 data-icon="chalkboard-teacher"
                                 data-prefix="fad"
                                 focusable="false"
                                 role="img"
                                 viewBox="0 0 640 512"
                                 xmlns="http://www.w3.org/2000/svg">
                                <g class="fa-group">
                                    <path class="fa-secondary"
                                          d="M640 49.59v316.82c0 27.34-21.53 49.59-48 49.59H343.79c-.9-2.53-1.86-5.05-2.9-7.54A144.52 144.52 0 0 0 298.51 352H576V64H224v49.1a127 127 0 0 0-59.46-17h-.33c-1.4 0-2.8-.08-4.21-.08V49.59C160 22.25 181.53 0 208 0h384c26.47 0 48 22.25 48 49.59z"
                                          fill="currentColor">
                                    </path>
                                    <path class="fa-primary"
                                          d="M208 352a22.88 22.88 0 0 0-7.06 1.09A131.91 131.91 0 0 1 160 360a132 132 0 0 1-40.95-6.91 22.82 22.82 0 0 0-7-1.09A112 112 0 0 0 0 464.62C.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 208 352zm-48-32a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm64-256v49.09a129 129 0 0 1 26.51 20.4 128 128 0 0 1 0 181 132.13 132.13 0 0 1-10.14 9.14A143.89 143.89 0 0 1 298.51 352H384v-64h128v64h64V64z"
                                          fill="currentColor">
                                    </path>
                                </g>
                            </svg>
                            <h3 style='text-align: center'>Faculties</h3>
                            <p>Manage the main people of your college, the faculty.</p>
                        </Card>
                    </div>
                    <div @onclick='() => NavigateTo("Programmes")'>
                        <Card >
                            <svg aria-hidden="true" focusable="false"
                                 data-prefix="fad" data-icon="diploma"
                                 role="img" xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 640 512" class="svg-inline--fa fa-diploma fa-w-20 fa-7x">
                                <g class="fa-group">
                                    <path fill="currentColor" d="M608.64 63.56c-6.78-11.5-22-17.88-37-14.77l-127 42.78c-9.44 3.18-19 5.93-28.65 8.37v144.12L467 332l104.6 35.24c15 3.1 30.25-3.27 37-14.77 41.85-70.96 41.85-217.97.04-288.91zM68.39 48.78c-15-3.1-30.25 3.27-37 14.77-41.81 70.94-41.81 218 0 288.89 6.78 11.5 22 17.88 37 14.77L173 332l51-87.91V99.94c-9.64-2.45-19.21-5.19-28.65-8.37z" class="fa-secondary"></path><path fill="currentColor" d="M384 112v140.67l95.16 164A11.13 11.13 0 0 1 468.43 432h-36.64l-25.2 28.52a11.13 11.13 0 0 1-18.39-3.45L320 336l-68.19 121.07a11.13 11.13 0 0 1-18.39 3.45L208.21 432h-36.64a11.13 11.13 0 0 1-10.73-15.32l95.16-164V112z" class="fa-primary"></path>
                                </g>
                            </svg>
                            <h3 style='text-align: center'>Programmes</h3>
                            <p>Check and add programmes your college has to offer.</p>
                        </Card>
                    </div>
                    <div @onclick='() => NavigateTo("Courses")'>
                        <Card>
                            <svg aria-hidden="true" focusable="false" data-prefix="fad" 
                                 data-icon="road" role="img" xmlns="http://www.w3.org/2000/svg" 
                                 viewBox="0 0 576 512" class="svg-inline--fa fa-road fa-w-18 fa-7x">
                                <g class="fa-group">
                                    <path fill="currentColor" d="M267.74 192h40.54a12 12 0 0 0 11.93-13.26l-4.6-43.58a8 8 0 0 0-8-7.16h-39.25a8 8 0 0 0-8 7.16l-4.59 43.58A12 12 0 0 0 267.74 192zm5.68-96h29.16a8 8 0 0 0 8-8.84L308.09 64h-40.18l-2.45 23.16a8 8 0 0 0 7.96 8.84zm64.89 254.32A16 16 0 0 0 322.4 336h-68.8a16 16 0 0 0-15.91 14.32L227.38 448h121.24zm-78-46.32h55.29a16 16 0 0 0 15.91-17.68l-5.07-48A16 16 0 0 0 310.57 224h-45.15a16 16 0 0 0-15.91 14.32l-5.07 48A16 16 0 0 0 260.35 304z" class="fa-secondary"></path><path fill="currentColor" d="M573.19 402.67l-139.79-320C428.43 71.29 417.6 64 405.68 64h-97.59l2.45 23.16a8 8 0 0 1-8 8.84h-29.12a8 8 0 0 1-8-8.84L267.91 64h-97.59a30.45 30.45 0 0 0-27.73 18.67L2.8 402.67C-6.45 423.86 8.31 448 30.54 448h196.84l10.31-97.68A16 16 0 0 1 253.6 336h68.8a16 16 0 0 1 15.91 14.32L348.62 448h196.84c22.23 0 36.99-24.14 27.73-45.33zM255.81 178.74l4.59-43.58a8 8 0 0 1 8-7.16h39.29a8 8 0 0 1 8 7.16l4.6 43.58A12 12 0 0 1 308.28 192h-40.54a12 12 0 0 1-11.93-13.26zM315.64 304h-55.29a16 16 0 0 1-15.91-17.68l5.07-48A16 16 0 0 1 265.42 224h45.15a16 16 0 0 1 15.91 14.32l5.07 48A16 16 0 0 1 315.64 304z" class="fa-primary"></path>
                                </g>
                            </svg>
                            <h3 style='text-align: center'>Courses</h3>
                            <p>All the courses your college teaches.</p>
                        </Card>
                    </div>
                </CardLayout>
            </div>
            break;
    }

</div>

@if (_isNewUser) {
    <Carousel Headings="@_heads"
              Descriptions="@_paras"
              Images="@_images"/>
}

@code {
    Session _session;

    [Parameter]
    public string currentPage { get; set; }

    private bool _isNewUser;

    //Headings
    private readonly string[] _heads = {
        "Welcome to TGen!", "Easy to use, fast and neat", "Stay on schedule",
        "Review on the go", "Complete peace of mind", "Thanks for choosing TGen"
    };

    //Descriptions
    private readonly string[] _paras = {
        "TGen is the only tool you'll want.", "Powerful dashboard, little clutter.",
        "TGen powerful and revolutionary time table scheduler is powered by a powerful algorithm, so you don't loose productivity.",
        "Forget running into issues, TGen will manage everything!",
        "Easy tracking, quick filters, and more.",
        "Explore TGen, we're here to help.",
        "We hope you enjoy."
    };

    private readonly string[] _images = {
        "img/welcome.svg",
        "img/dashboard.svg",
        "img/ScheduleImage.svg",
        "img/review.svg",
        "img/percentages.svg",
        "img/thanks.svg",
    };

    private void NavigateTo(string page) {
        NavigationManager.NavigateTo($"/Manage/{page}");
    }

    protected override async Task OnAfterRenderAsync(bool firstRender) {
        var sessionId = await LocalStorage.GetItemAsync<string>(Constants.SessionId);
        if (SessionManager.IsValidSession(sessionId)) {
            _session = SessionManager.GetSession(sessionId);
            _isNewUser = _session.IsInitialSetup;
        }
        else {
            NavigationManager.NavigateTo("/");
            _session = null;
        }
    }

}