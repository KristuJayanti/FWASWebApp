@page "/Manage"
@using System.Reflection.Metadata
@using TGenWebApp.Services
@inject Blazored.LocalStorage.ILocalStorageService LocalStorage

<style>
    .fa-9x {
        width: 100px; 
        height: 100px;
        margin-left: 40px;
        margin-right: 40px;
    }
</style>

<div style="width: 100vw; position: fixed; background: #fffc; backdrop-filter: blur(4px); z-index: 10; margin-top: 1rem;">
    <div style="display: flex; align-items: center; justify-content: center; ">
        <nav>
            <ul>
                <li>
                    <a class='@(_currentPage == "Deaneries" ? "active" : "")'
                       @onclick='() => NavigateTo("Deaneries")'>
                        Deaneries
                    </a>
                </li>
                <li>
                    <a class='@(_currentPage == "Departments" ? "active" : "")'
                       @onclick='() => NavigateTo("Departments")'>
                        Departments
                    </a>
                </li>
                <li>
                    <a class='@(_currentPage == "Faculty" ? "active" : "")'
                       @onclick='() => NavigateTo("Faculty")'>
                        Faculty
                    </a>
                </li>
                <li>
                    <a class='@(_currentPage == "Programmes" ? "active" : "")'
                       @onclick='() => NavigateTo("Programmes")'>
                        Programmes
                    </a>
                </li>
                <li>
                    <a class='@(_currentPage == "Courses" ? "active" : "")'
                       @onclick='() => NavigateTo("Courses")'>
                        Courses
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>

<div style="margin-top: 4rem;">

    @switch (_currentPage) {
        case "Deaneries":
            <Deaneries/>
            break;
        case "Departments":
            <Departments/>
            break;
        case "Faculty":
            <Faculty/>
            break;
        case "Programmes":
            <Programmes/>
            break;
        case "Courses":
            <Courses/>
            break;
        default:
            <div style='padding-top: 5rem'>
                <CardLayout ChildrenHeight="10rem"
                            ChildrenWidth="10rem">
                    @* Original in layouts.txt *@
                    <div @onclick='() => NavigateTo("Deaneries")'>
                        <Card>
                            <svg aria-hidden="true"
                                 class="fa-9x fa-university fa-w-16 svg-inline--fa"
                                 data-icon="university"
                                 data-prefix="fad"
                                 focusable="false"
                                 role="img"
                                 viewBox="0 0 512 512"
                                 xmlns="http://www.w3.org/2000/svg">
                                <g class="fa-group">
                                    <path class="fa-secondary"
                                          d="M160,192V384h64V192h64V384h64V192h64V384h36a12,12,0,0,1,12,12v20H48V396a12,12,0,0,1,12-12H96V192Z"
                                          fill="currentColor">
                                    </path>
                                    <path class="fa-primary"
                                          d="M491.06,120.61l-232-88a8,8,0,0,0-6.12,0l-232,88A8,8,0,0,0,16,128v16a8,8,0,0,0,8,8H48v12a12,12,0,0,0,12,12H452a12,12,0,0,0,12-12V152h24a8,8,0,0,0,8-8V128A8,8,0,0,0,491.06,120.61ZM472,432H40a24,24,0,0,0-24,24v16a8,8,0,0,0,8,8H488a8,8,0,0,0,8-8V456A24,24,0,0,0,472,432Z"
                                          fill="currentColor">
                                    </path>
                                </g>
                            </svg>
                            <h3 style='text-align: center'>Deaneries</h3>
                            <p>Manage what courses your college has to offer.</p>
                        </Card>
                    </div>
                    <div @onclick='() => NavigateTo("Departments")'>
                        <Card>
                            <svg aria-hidden="true"
                                 class="fa-9x fa-school fa-w-20 svg-inline--fa"
                                 data-icon="school"
                                 data-prefix="fad"
                                 focusable="false"
                                 role="img"
                                 viewBox="0 0 640 512"
                                 xmlns="http://www.w3.org/2000/svg">
                                <g class="fa-group">
                                    <path class="fa-secondary"
                                          d="M360 176h-24v-40a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v64a8 8 0 0 0 8 8h48a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8zM0 224v272a16 16 0 0 0 16 16h80V192H32a32 32 0 0 0-32 32zm608-32h-64v320h80a16 16 0 0 0 16-16V224a32 32 0 0 0-32-32z"
                                          fill="currentColor">
                                    </path>
                                    <path class="fa-primary"
                                          d="M497.75 112l-160-106.63a32 32 0 0 0-35.5 0L142.25 112A32 32 0 0 0 128 138.66V512h128V368a16 16 0 0 1 16-16h96a16 16 0 0 1 16 16v144h128V138.67A32 32 0 0 0 497.75 112zM320 256a80 80 0 1 1 80-80 80 80 0 0 1-80 80z"
                                          fill="currentColor">
                                    </path>
                                </g>
                            </svg>
                            <h3 style='text-align: center'>Departments</h3>
                            <p>Manage all details about classes, students, and timings.</p>
                        </Card>
                    </div>
                    <div @onclick='() => NavigateTo("Faculties")'>
                        <Card >
                            <svg aria-hidden="true"
                                 class="fa-9x fa-chalkboard-teacher fa-w-20 svg-inline--fa"
                                 data-icon="chalkboard-teacher"
                                 data-prefix="fad"
                                 focusable="false"
                                 role="img"
                                 viewBox="0 0 640 512"
                                 xmlns="http://www.w3.org/2000/svg">
                                <g class="fa-group">
                                    <path class="fa-secondary"
                                          d="M640 49.59v316.82c0 27.34-21.53 49.59-48 49.59H343.79c-.9-2.53-1.86-5.05-2.9-7.54A144.52 144.52 0 0 0 298.51 352H576V64H224v49.1a127 127 0 0 0-59.46-17h-.33c-1.4 0-2.8-.08-4.21-.08V49.59C160 22.25 181.53 0 208 0h384c26.47 0 48 22.25 48 49.59z"
                                          fill="currentColor">
                                    </path>
                                    <path class="fa-primary"
                                          d="M208 352a22.88 22.88 0 0 0-7.06 1.09A131.91 131.91 0 0 1 160 360a132 132 0 0 1-40.95-6.91 22.82 22.82 0 0 0-7-1.09A112 112 0 0 0 0 464.62C.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 208 352zm-48-32a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm64-256v49.09a129 129 0 0 1 26.51 20.4 128 128 0 0 1 0 181 132.13 132.13 0 0 1-10.14 9.14A143.89 143.89 0 0 1 298.51 352H384v-64h128v64h64V64z"
                                          fill="currentColor">
                                    </path>
                                </g>
                            </svg>
                            <h3 style='text-align: center'>Faculties</h3>
                            <p>Manage the main people of your college, the faculty.</p>
                        </Card>
                    </div>
                </CardLayout>
            </div>
            break;
    }

</div>

@if (_isNewUser) {
    <Carousel Headings="@_heads"
              Descriptions="@_paras"
              Images="@_images"/>
}

@code {
    Session _session;
    private string _currentPage = "";
    private bool _isNewUser;

    //Headings
    private readonly string[] _heads = {
        "Welcome to TGen!", "Easy to use, fast and neat", "Stay on schedule",
        "Review on the go", "Complete peace of mind", "Thanks for choosing TGen"
    };

    //Descriptions
    private readonly string[] _paras = {
        "TGen is the only tool you'll want.", "Powerful dashboard, little clutter.",
        "TGen powerful and revolutionary time table scheduler is powered by a powerful algorithm, so you don't loose productivity.",
        "Forget running into issues, TGen will manage everything!",
        "Easy tracking, quick filters, and more.",
        "Explore TGen, we're here to help.",
        "We hope you enjoy."
    };

    private readonly string[] _images = {
        "img/welcome.svg",
        "img/dashboard.svg",
        "img/ScheduleImage.svg",
        "img/review.svg",
        "img/percentages.svg",
        "img/thanks.svg",
    };

    private void NavigateTo(string page) {
        _currentPage = page;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender) {
        var sessionId = await LocalStorage.GetItemAsync<string>(Constants.SessionId);
        if (SessionManager.IsValidSession(sessionId)) {
            _session = SessionManager.GetSession(sessionId);
            _isNewUser = _session.IsInitialSetup;
        }
        else {
            _session = null;
        }
    }

}